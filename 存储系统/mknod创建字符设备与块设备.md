# mknod创建字符设备与块设备

参考文章

1. [mknod命令 – 创建字符设备文件和块设备文件](https://www.linuxcool.com/mknod)

> Linux一切皆文件, 系统与设备通信之前, 要建立一个存放在`/dev`目录下的设备文件, 默认情况下就已经生成了很多设备文件, 有时候自己手动新建一些设备文件, 这就会用到`mknod`.

我实际需要用到这个命令的场景是, 在测试`tun/tap`网络设备的程序化创建时, 发现需要在代码里打开`/dev/net/tun`字符文件, 然后用`ioctl`将其标记为`tun/tap`类型.

我想看看`ioctl`是否可以接受任意一个普通文件, 或是任意一个字符文件的文件描述符当作参数. 我用`touch`创建了一个普通文件, 试了下, 不行; 于是又找到了`mknod`, 用于创建字符文件.

```
mknod /tmp/tun c 30 1
```

```console
$ ll /tmp | grep tun
crw-r--r--    1 root    root       30, 1 6月  12 14:13 tun
```

当然创建是成功了, 但是仍然不行, 算了.
