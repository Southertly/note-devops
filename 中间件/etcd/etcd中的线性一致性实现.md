参考文章

1. [etcd中的线性一致性实现](https://www.cnblogs.com/ricklz/p/15204381.html)
    - 什么是CAP、CAP的权衡
    - 线性一致性写、线性一致性读
    - MVCC 的底层实现原理(treeindex+blotdb)

## etcd中如何实现线性一致性

### 线性一致性写

所有的写操作, 都要经过leader节点;
客户端提交, leader会按顺序记录到日志中, 然后向其他节点并行发送AppendEntries RPC用以复制命令(如果命令丢失会不断重发);
当大多数节点成功复制后, leader就会提交命令, 即执行该命令并且将执行结果返回客户端;
raft保证已经提交的命令最终也会被其他少数节点成功执行;

由于在Raft算法中, 写操作成功仅仅意味着日志达成了一致(已经落盘), 而并不能确保当前状态机也已经apply了日志. 状态机apply日志的行为在大多数Raft算法的实现中都是异步的, 所以此时读取状态机并不能准确反应数据的状态, 很可能会读到过期数据. 

如何实现读取的线性一致性，就需要引入ReadIndex了

### 线性一致性读

